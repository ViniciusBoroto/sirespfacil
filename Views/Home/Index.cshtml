@model RessonanciaMagnetica;


<form asp-action="SalvarFormulario" method="post">
    <h3>Identificação do Serviço Solicitante</h3>
    <div>
        <label>Unidade</label>
        <input asp-for="Solicitante.Unidade" class="form-control" />
    </div>
    <div>
        <label>Telefone</label>
        <input asp-for="Solicitante.Unidade.NIR" class="form-control" />
    </div>
    <div>
        <label>Médico Solicitante</label>
        <input asp-for="Solicitante.Medico.Nome" class="form-control" />
    </div>
    <div>
        <label>CRM</label>
        <input asp-for="Solicitante.Medico.CRM" class="form-control" />
    </div>

    <h3>Identificação do Paciente</h3>
    <div>
        <label>Nome</label>
        <input asp-for="Paciente.Nome" class="form-control" />
    </div>
    <div>
        <label>Código SIRES</label>
        <input asp-for="Paciente.CodigoSIRESP" class="form-control" />
    </div>
    <div>
        <label>Data de Nascimento</label>
        <input asp-for="Paciente.DataNascimento" type="date" class="form-control" />
    </div>
    <div>
        <label>Sexo</label>
        <select asp-for="Paciente.Sexo" class="form-control">
            <option value="M">Masculino</option>
            <option value="F">Feminino</option>
        </select>
    </div>
    <div>
        <label>Peso (kg)</label>
        <input asp-for="Peso" type="number" class="form-control" />
    </div>
    <div>
        <label>Altura (m)</label>
        <input asp-for="Altura" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Circunferência Abdominal (m)</label>
        <input asp-for="CircunferenciaAbdominal" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Ureia</label>
        <input asp-for="ValorUreia" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Creatinina</label>
        <input asp-for="ValorCreatinina" type="number" class="form-control" step="0.01" />
    </div>

    <h3>Exames de Imagem Realizados</h3>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalExame">
        Adicionar Exame
    </button>

    <div id="exames-lista" class="mt-3"></div>

    <!-- Modal -->
    <div class="modal fade" id="modalExame" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Adicionar Exame</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label>Tipo de Exame</label>
                        <select class="form-control" id="tipoExame">
                            <option value="RaioX">Raio-X</option>
                            <option value="Tomografia">Tomografia</option>
                            <option value="Ultrassonografia">Ultrassonografia</option>
                            <option value="Ressonancia">Ressonância</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Anexar arquivos</label>
                        <input type="file" id="arquivosExame" class="form-control" multiple />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="adicionarExame()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden inputs vão sendo adicionados dinamicamente -->
    @section Scripts {
        <script src="~/js/exames.js"></script>
    }

    @*  <div>
        <label>Outro</label>
        <input asp-for="OutroExame" class="form-control" />
    </div>

    <h3>Exame Solicitado</h3>
    <div>
        <label>Exame</label>
        <input asp-for="NomeExame" class="form-control" />
    </div>
    <div>
        <label>Sedação</label>
        <input asp-for="Sedacao" type="checkbox" /> Sim
    </div>
    <div>
        <label>Classificação ASA</label>
        <select asp-for="ClassificacaoASA" class="form-control">
            <option>I</option>
            <option>II</option>
            <option>III</option>
            <option>IV</option>
        </select>
    </div>
    <div>
        <label>Lateralidade</label>
        <select asp-for="Lateralidade" class="form-control">
            <option value="E">Esquerda</option>
            <option value="D">Direita</option>
            <option value="NA">Não se aplica</option>
        </select>
    </div>

    <h3>Justificativa</h3>
    <div>
        <label>Conduta Diagnóstica</label>
        <input asp-for="CondutaDiagnostica" class="form-control" />
    </div>
    <div>
        <label>Conduta Terapêutica</label>
        <input asp-for="CondutaTerapeutica" class="form-control" />
    </div>
    <div>
        <label>Descrição do Diagnóstico</label>
        <textarea asp-for="DescricaoDiagnostico" class="form-control"></textarea>
    </div>
    <div>
        <label>CID Principal</label>
        <input asp-for="CIDPrincipal" class="form-control" />
    </div>@model RessonanciaMagnetica;

<form asp-action="SalvarFormulario" method="post">
    <h2>Identificação do Serviço Solicitante</h2>
    <div>
        <label asp-for="Solicitante.Unidade">Unidade:</label>
        <input asp-for="Solicitante.Unidade" class="form-control" />
    </div>
    <div>
        <label asp-for="Solicitante.TelefoneNIR">Telefone NIR:</label>
        <input asp-for="Solicitante.TelefoneNIR" class="form-control" />
    </div>
    <div>
        <label asp-for="Solicitante.Medico.Nome">Médico Solicitante:</label>
        <input asp-for="Solicitante.Medico.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="Solicitante.Medico.CRM">CRM:</label>
        <input asp-for="Solicitante.Medico.CRM" class="form-control" />
    </div>

    <hr/>

    <h2>Identificação do Paciente</h2>
    <div>
        <label asp-for="Paciente.Nome">Nome:</label>
        <input asp-for="Paciente.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.CodigoSIRESP">Código SIRESP:</label>
        <input asp-for="Paciente.CodigoSIRESP" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.DataNascimento">Data de Nascimento:</label>
        <input asp-for="Paciente.DataNascimento" type="date" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.Idade">Idade:</label>
        <input asp-for="Paciente.Idade" type="number" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.Sexo">Sexo:</label>
        <select asp-for="Paciente.Sexo" class="form-control">
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
        </select>
    </div>
    <div>
        <label asp-for="Peso">Peso (Max.: 170kg):</label>
        <input asp-for="Peso" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="Altura">Altura:</label>
        <input asp-for="Altura" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="CircunferenciaAbdominal">Circunferência Abdominal (Máx.: 1,36cm):</label>
        <input asp-for="CircunferenciaAbdominal" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="ValorUreia">Valor conforme exame laboratorial UREIA:</label>
        <input asp-for="ValorUreia" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="ValorCreatinina">Valor conforme exame laboratorial CREATININA:</label>
        <input asp-for="ValorCreatinina" type="number" step="0.01" class="form-control" />
    </div>
    
    <hr/>

    <h2>Exames de Imagem Já Realizados (Anexar Laudo)</h2>
    @for (int i = 0; i < Model.Exames.Count; i++)
    {
        <div>
            <input asp-for="Exames[i].Tipo" type="checkbox" />
            <label>@Model.Exames[i].Tipo.ToString()</label>
            <input asp-for="Exames[i].Data" type="date" class="form-control" />
        </div>
    }
    <div>
        <label asp-for="Motivo">Indicar o motivo da solicitação:</label>
        <textarea asp-for="Motivo" class="form-control"></textarea>
    </div>

    <hr/>

    <h2>Exame Solicitado</h2>
    @for (int i = 0; i < Model.ExamesSolicitados.Count; i++)
    {
        <div>
            <label asp-for="ExamesSolicitados[i].Exame">Exame:</label>
            <input asp-for="ExamesSolicitados[i].Exame" class="form-control" />
        </div>
        <div>
            <label asp-for="ExamesSolicitados[i].Sedacao">Sedação:</label>
            <input asp-for="ExamesSolicitados[i].Sedacao" type="checkbox" />
        </div>
        <div>
            <label asp-for="ExamesSolicitados[i].ClassificacaoAsa.Classificacao">Classificação ASA:</label>
            <select asp-for="ExamesSolicitados[i].ClassificacaoAsa.Classificacao" class="form-control">
                <option>I</option>
                <option>II</option>
                <option>III</option>
                <option>IV</option>
            </select>
        </div>
        <div>
            <label asp-for="ExamesSolicitados[i].Lateralidade.Nome">Lateralidade:</label>
            <select asp-for="ExamesSolicitados[i].Lateralidade.Nome" class="form-control">
                <option value="Esquerda">Esquerda</option>
                <option value="Direita">Direita</option>
                <option value="Não se aplica">Não se aplica</option>
            </select>
        </div>
    }

    <hr/>

    <h2>Justificativa do Exame Solicitado</h2>
    <div>
        <label asp-for="Justificativa.Nome">Justificativa:</label>
        <input asp-for="Justificativa.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="DescricaoDiagnostico">Descrição do Diagnóstico:</label>
        <textarea asp-for="DescricaoDiagnostico" class="form-control"></textarea>
    </div>
    <div>
        <label asp-for="CIDPrincipal">CID Principal:</label>
        <input asp-for="CIDPrincipal" class="form-control" />
    </div>
    <div>
        <label asp-for="CIDSecundario">CID Secundário:</label>
        <input asp-for="CIDSecundario" class="form-control" />
    </div>
    <div>
        <label asp-for="CIDCausasAssociadas">CID Causas Associadas:</label>
        <input asp-for="CIDCausasAssociadas" class="form-control" />
    </div>

    <hr/>

    <h2>Implantes Metálicos e Outros</h2>
    @for (int i = 0; i < Model.ImplantesMetalicos.Count; i++)
    {
        <div>
            <label asp-for="ImplantesMetalicos[i].TempoDeUso">Tempo de Uso:</label>
            <input asp-for="ImplantesMetalicos[i].TempoDeUso" class="form-control" />
        </div>
        <div>
            <label asp-for="ImplantesMetalicos[i].Material">Material:</label>
            <input asp-for="ImplantesMetalicos[i].Material" class="form-control" />
        </div>
        <div>
            <label asp-for="ImplantesMetalicos[i].Localizacao">Localização:</label>
            <input asp-for="ImplantesMetalicos[i].Localizacao" class="form-control" />
        </div>
    }

    <hr/>

    <h2>Assinatura e Carimbo do Médico Solicitante</h2>
    <div>
        <label asp-for="Data">Data:</label>
        <input asp-for="Data" type="date" class="form-control" />
    </div>
    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Salvar Formulário</button>
    </div>
</form>
    <div>
        <label>CID Secundário</label>
        <input asp-for="CIDSecundario" class="form-control" />
    </div>
    <div>
        <label>CID Associado</label>
        <input asp-for="CIDAssociado" class="form-control" />
    </div>

    <h3>Implantes</h3>
    <div>
        <label>Tempo de Uso</label>
        <input asp-for="TempoUso" class="form-control" />
    </div>
    <div>
        <label>Material</label>
        <input asp-for="Material" class="form-control" />
    </div>
    <div>
        <label>Localização</label>
        <input asp-for="Localizacao" class="form-control" />
    </div> 

    <h3>Assinatura</h3>
    <div>
        <label>Data</label>
        <input asp-for="Data" type="date" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button> *@
</form>
