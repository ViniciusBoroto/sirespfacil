@using SirespFacil.Models.ViewModels
@model RessonanciaMagneticaViewModel;


<form asp-action="SalvarFormulario" method="post">
    <h3>Identificação do Serviço Solicitante</h3>
    <div>
        <label>Unidade</label>
        <input asp-for="Solicitante.Unidade" class="form-control" />
    </div>
    <div>
        <label>Telefone</label>
        <input asp-for="Solicitante.Unidade.NIR" class="form-control" />
    </div>
    <div>
        <label>Médico Solicitante</label>
        <input asp-for="Solicitante.Medico.Nome" class="form-control" />
    </div>
    <div>
        <label>CRM</label>
        <input asp-for="Solicitante.Medico.CRM" class="form-control" />
    </div>

    <h3>Identificação do Paciente</h3>
    <div>
        <label>Nome</label>
        <input asp-for="Paciente.Nome" class="form-control" />
    </div>
    <div>
        <label>Código SIRES</label>
        <input asp-for="Paciente.CodigoSIRESP" class="form-control" />
    </div>
    <div>
        <label>Data de Nascimento</label>
        <input asp-for="Paciente.DataNascimento" type="date" class="form-control" />
    </div>
    <div>
        <label>Sexo</label>
        <select asp-for="Paciente.Sexo" class="form-control">
            <option value="M">Masculino</option>
            <option value="F">Feminino</option>
        </select>
    </div>
    <div>
        <label>Peso (kg)</label>
        <input asp-for="Peso" type="number" class="form-control" />
    </div>
    <div>
        <label>Altura (m)</label>
        <input asp-for="Altura" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Circunferência Abdominal (m)</label>
        <input asp-for="CircunferenciaAbdominal" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Ureia</label>
        <input asp-for="ValorUreia" type="number" class="form-control" step="0.01" />
    </div>
    <div>
        <label>Creatinina</label>
        <input asp-for="ValorCreatinina" type="number" class="form-control" step="0.01" />
    </div>

    <h3>Exames de Imagem Realizados</h3>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalExame">
        Adicionar Exame
    </button>

    <div id="exames-lista" class="mt-3"></div>

    <!-- Modal -->
    <div class="modal fade" id="modalExame" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Adicionar Exame</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label>Tipo de Exame</label>
                        <select class="form-control" id="tipoExame">
                            <option value="RaioX">Raio-X</option>
                            <option value="Tomografia">Tomografia</option>
                            <option value="Ultrassonografia">Ultrassonografia</option>
                            <option value="Ressonancia">Ressonância</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Anexar arquivos</label>
                        <input type="file" id="arquivosExame" class="form-control" multiple />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="adicionarExame()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

   
    @section Scripts {
        <script src="~/js/exames.js"></script>
    }

    <div class="form-group">
        <label asp-for="OutroExame"></label>
        <input asp-for="OutroExame" class="form-control" />
        <span asp-validation-for="OutroExame" class="text-danger"></span>
    </div>
    <h3>Exames Solicitados</h3>
    <script src="~/js/exames.js"></script>
    
    <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#modalExame">
        Adicionar Exame
    </button>

    <div id="listaExames"></div>
    <form asp-action="Cadastro" method="post">
        <div id="inputsHiddenExames"></div>
        <button type="submit" class="btn btn-primary mt-3">Salvar Paciente</button>
    </form>

    <div class="modal fade" id="modalExame" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Adicionar Exame</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label>Exame</label>
                        <input type="text" id="exame" class="form-control" />
                    </div>
                    <div class="form-check mb-3">
                        <input type="checkbox" id="sedacao" class="form-check-input" />
                        <label class="form-check-label" for="sedacao">Sedação</label>
                    </div>
                    <div class="mb-3">
                        <label>Classificação ASA</label>
                        <select id="classificacaoAsa" class="form-control">
                            <option value="">Selecione...</option>
                            <option value="I">I</option>
                            <option value="II">II</option>
                            <option value="III">III</option>
                            <option value="IV">IV</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Lateralidade</label>
                        <select id="lateralidade" class="form-control">
                            <option value="">Selecione...</option>
                            <option value="E">Esquerda</option>
                            <option value="D">Direita</option>
                            <option value="NA">Não se aplica</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="adicionarExame()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <h3>Justificativa</h3>
    <div>
        <label asp-for="Conduta.Nome">Conduta Diagnóstica</label>
        <input asp-for="Conduta.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="Justificativa.Nome">Conduta Terapêutica</label>
        <input asp-for="Justificativa.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="DescricaoDiagnostico"></label>
        <textarea asp-for="DescricaoDiagnostico" class="form-control"></textarea>
    </div>
    <div>
        <label asp-for="CIDPrincipal"></label>
        <input asp-for="CIDPrincipal" class="form-control" />
    </div>

<form asp-action="SalvarFormulario" method="post">
    <h2>Identificação do Serviço Solicitante</h2>
    <div>
        <label asp-for="Solicitante.Unidade">Unidade:</label>
        <input asp-for="Solicitante.Unidade" class="form-control" />
    </div>
        <div>
            <label asp-for="Solicitante.Unidade.NIR">NIR:</label>
            <input asp-for="Solicitante.Unidade.NIR" class="form-control" />
            <span asp-validation-for="Solicitante.Unidade.NIR" class="text-danger"></span>
        </div>
    <div>
        <label asp-for="Solicitante.Medico.Nome">Médico Solicitante:</label>
        <input asp-for="Solicitante.Medico.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="Solicitante.Medico.CRM">CRM:</label>
        <input asp-for="Solicitante.Medico.CRM" class="form-control" />
    </div>

    <hr/>

    <h2>Identificação do Paciente</h2>
    <div>
        <label asp-for="Paciente.Nome">Nome:</label>
        <input asp-for="Paciente.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.CodigoSIRESP">Código SIRESP:</label>
        <input asp-for="Paciente.CodigoSIRESP" class="form-control" />
    </div>
    <div>
        <label asp-for="Paciente.DataNascimento">Data de Nascimento:</label>
        <input asp-for="Paciente.DataNascimento" type="date" class="form-control" />
    </div>
        <div>
            <label asp-for="Paciente.Idade">Idade:</label>
            <input asp-for="Paciente.Idade" type="number" class="form-control" />
            <span asp-validation-for="Paciente.Idade" class="text-danger"></span>
        </div>
    <div>
        <label asp-for="Paciente.Sexo">Sexo:</label>
        <select asp-for="Paciente.Sexo" class="form-control">
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
        </select>
    </div>
    <div>
        <label asp-for="Peso">Peso (Max.: 170kg):</label>
        <input asp-for="Peso" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="Altura">Altura:</label>
        <input asp-for="Altura" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="CircunferenciaAbdominal">Circunferência Abdominal (Máx.: 1,36cm):</label>
        <input asp-for="CircunferenciaAbdominal" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="ValorUreia">Valor conforme exame laboratorial UREIA:</label>
        <input asp-for="ValorUreia" type="number" step="0.01" class="form-control" />
    </div>
    <div>
        <label asp-for="ValorCreatinina">Valor conforme exame laboratorial CREATININA:</label>
        <input asp-for="ValorCreatinina" type="number" step="0.01" class="form-control" />
    </div>
    
    <hr/>

        <h3>Exames de Imagem Já Realizados (Anexar Laudo)</h3>
        <script src="~/js/examesRealizados.js"></script>

        <!-- Botão para abrir modal -->
        <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#modalExameRealizado">
            Adicionar Exame Realizado
        </button>

        <!-- Container para pré-visualização -->
        <div id="listaExamesRealizados"></div>

        <!-- Formulário -->
        <form asp-action="Cadastro" method="post" enctype="multipart/form-data">
            <div id="inputsHiddenExamesRealizados"></div>

            <div class="mb-3">
                <label asp-for="Motivo">Indicar o motivo da solicitação:</label>
                <textarea asp-for="Motivo" class="form-control"></textarea>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Salvar Paciente</button>
        </form>

        <!-- Modal -->
        <div class="modal fade" id="modalExameRealizado" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Adicionar Exame Realizado</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label>Tipo de Exame</label>
                            <input type="text" id="tipoExameRealizado" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <label>Data do Exame</label>
                            <input type="date" id="dataExameRealizado" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <label>Laudo (opcional)</label>
                            <input type="file" id="laudoExameRealizado" class="form-control" />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="adicionarExameRealizado()">Adicionar</button>
                    </div>
                </div>
            </div>
        </div>


    <hr/>

        <h3>Exames Solicitados</h3>
        <script src="~/js/exames.js"></script>


        <!-- Botão para abrir modal -->
        <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#modalExame">
            Adicionar Exame
        </button>

        <!-- Container para pré-visualizar os exames adicionados -->
        <div id="listaExames"></div>

        <!-- Formulário -->
        <form asp-action="Cadastro" method="post">
            <div id="inputsHiddenExames"></div>
            <button type="submit" class="btn btn-primary mt-3">Salvar Paciente</button>
        </form>

        <!-- Modal -->
        <div class="modal fade" id="modalExame" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Adicionar Exame</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label>Exame</label>
                            <input type="text" id="exame" class="form-control" />
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" id="sedacao" class="form-check-input" />
                            <label class="form-check-label" for="sedacao">Sedação</label>
                        </div>
                        <div class="mb-3">
                            <label>Classificação ASA</label>
                            <select id="classificacaoAsa" class="form-control">
                                <option value="">Selecione...</option>
                                <option value="I">I</option>
                                <option value="II">II</option>
                                <option value="III">III</option>
                                <option value="IV">IV</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label>Lateralidade</label>
                            <select id="lateralidade" class="form-control">
                                <option value="">Selecione...</option>
                                <option value="E">Esquerda</option>
                                <option value="D">Direita</option>
                                <option value="NA">Não se aplica</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="adicionarExame()">Adicionar</button>
                    </div>
                </div>
            </div>
        </div>
    <hr/>

    <h2>Justificativa do Exame Solicitado</h2>
    <div>
        <label asp-for="Justificativa.Nome">Justificativa:</label>
        <input asp-for="Justificativa.Nome" class="form-control" />
    </div>
    <div>
        <label asp-for="DescricaoDiagnostico">Descrição do Diagnóstico:</label>
        <textarea asp-for="DescricaoDiagnostico" class="form-control"></textarea>
    </div>
    <div>
        <label asp-for="CIDPrincipal">CID Principal:</label>
        <input asp-for="CIDPrincipal" class="form-control" />
    </div>
    <div>
        <label asp-for="CIDSecundario">CID Secundário:</label>
        <input asp-for="CIDSecundario" class="form-control" />
    </div>
    <div>
        <label asp-for="CIDCausasAssociadas">CID Causas Associadas:</label>
        <input asp-for="CIDCausasAssociadas" class="form-control" />
    </div>

    <hr/>

        <h3>Implantes</h3>


        <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#modalImplante">
            Adicionar Implante
        </button>


        <div id="listaImplantes"></div>

        <form asp-action="Cadastro" method="post">
            <div id="inputsHidden"></div>
            <button type="submit" class="btn btn-primary mt-3">Salvar Paciente</button>
        </form>

        <!-- Modal para adicionar implante -->
        <div class="modal fade" id="modalImplante" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Adicionar Implante</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label>Dispositivo</label>
                            <input type="text" id="dispositivo" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <label>Tempo de Uso</label>
                            <input type="text" id="tempoDeUso" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <label>Material</label>
                            <input type="text" id="material" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <label>Localização</label>
                            <input type="text" id="localizacao" class="form-control" />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="adicionarImplante()">Adicionar</button>
                    </div>
                </div>
            </div>
        </div>

    <hr/>

    <h2>Assinatura e Carimbo do Médico Solicitante</h2>
    <div>
        <label asp-for="Data">Data:</label>
        <input asp-for="Data" type="date" class="form-control" />
    </div>
    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Salvar Formulário</button>
    </div>
</form>
    <div>
        <label>CID Secundário</label>
        <input asp-for="CIDSecundario" class="form-control" />
    </div>
    <div>
        <label asp-for="CIDCausasAssociadas">CID Associado</label>
        <input asp-for="CIDCausasAssociadas" class="form-control" />
        <span asp-validation-for="CIDCausasAssociadas" class="text-danger"></span>
    </div>

    @{
    ViewData["Title"] = "Cadastro de Implantes";
}
    <script src="~/js/implantes.js"></script>


    <h3>Assinatura</h3>
    <div>
        <label>Data</label>
        <input asp-for="Data" type="date" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button> 
</form>
 